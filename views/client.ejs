<%- include('partials/header', {title: `Manage Client - ${client.name}`}) %>

<div class="header">
    <h1>Manage Client: <%= client.name %></h1>
    <a href="/admin">&larr; Back to All Clients</a>
</div>
<p><strong>API Key:</strong> <code><%= client.apiKey %></code></p>

<div class="card">
    <h2>Domains</h2>
    <% if (domains.length === 0) { %>
        <p>No domains added yet.</p>
    <% } else { %>
        <table>
            <thead>
                <tr>
                    <th>Domain Name</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% domains.forEach(domain => { %>
                    <tr>
                        <td><%= domain.domainName %></td>
                        <td>
                            <% if (domain.verified) { %>
                                <span class="status-verified">Verified</span>
                            <% } else { %>
                                <span class="status-pending">Pending Verification</span>
                                <div class="verification-instructions">
                                    <p>To verify, add the following TXT record to your DNS settings for <strong><%= domain.domainName %></strong>:</p>
                                    <code>my-email-service-verification=<%= domain.domainName %></code>
                                </div>
                            <% } %>
                        </td>
                        <td>
                            <% if (!domain.verified) { %>
                                <a href="/admin/clients/<%= client.id %>/domains/<%= domain.id %>/verify" class="button-secondary">Verify Now</a>
                            <% } %>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } %>
</div>

<div class="card">
    <h2>Add New Domain</h2>
    <form action="/admin/clients/<%= client.id %>/domains" method="POST">
        <div class="form-group">
            <label for="domainName">Domain Name (e.g., my-saas.com)</label>
            <input type="text" id="domainName" name="domainName" required>
        </div>
        <button type="submit">Add Domain</button>
    </form>
</div>

<%- include('partials/footer') %>
